@use super::card_html; 
@use super::base_html; 
@use crate::joblist::*;
@(title: &str, admin: bool, logged_in: bool, job_datas: &[JobData], params: SearchParams)

@:base_html(title, admin,  logged_in, {
    
    @if admin {
        <div class="mt-1 mb-2 input-group d-flex justify-content-center">
            <a href="/jobedit">
                <button type="button" class="btn btn-primary">Create new job</button>
            </a>
        </div>
    }

    <button
    class="btn btn-primary"
    type="button"
    data-bs-toggle="collapse"
    data-bs-target="#collapse"
    aria-expanded="false"
    aria-controls="collapse"
  >
    Filters
  </button>
  <div id="collapse" class="collapse show mb-2 justify-content-center ">
    <form id="filter" method="get" class="form-inline col">
      <div class="row">
        <div class="col-sm-6">
          From
          <input required form="filter" type="date" class="form-control mx-2" id="start_date" name="start_date" value="@params.start"
          />
        </div>
        <div class="col-sm-6">
          To
          <input required form="filter" type="date" class="form-control mx-2" id="end_date" name="end_date" value="@params.end"
          />
        </div>
      </div>
  
      <div class="row">
        <div class="col-sm-6">
          Site name
          <input form="filter" type="text" class="form-control mx-2" id="site_name" name="site_name" value="@params.site_name"
          />
        </div>
        <div class="col-sm-6">
          Work order
          <input form="filter" type="text" class="form-control mx-2" id="work_order" name="work_order" value="@params.work_order"
          />
        </div>
        <div class="col-sm">
          Address
          <input form="filter" type="text" class="form-control mx-2" id="address" name="address" value="@params.address"
          />
        </div>
        <div class="col-sm">
            Field notes
            <input form="filter" type="text" class="form-control mx-2" id="notes" name="notes" value="@params.fieldnotes"
            />
          </div>
      </div>
  
      <button form="filter" class="btn btn-outline-primary" type="submit">Search</button>
    </form>
  </div>


    <ul class="list-group list-group-flush">  @for data in job_datas.iter() {
        <li class="list-group-item">
            @:card_html(data.job_id, data.worker_id, &data.worker_name, &data.job_name, &data.address, &data.date, &data.notes, &data.work_order, admin)
        </li>}
    </ul>
}
)